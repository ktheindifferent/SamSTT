# STT Service Configuration

# Default STT Engine
STT_ENGINE=deepspeech

# Service Configuration
MAX_ENGINE_WORKERS=2
LOG_LEVEL=INFO

# Security Configuration
MAX_FILE_SIZE=52428800  # 50MB in bytes
MAX_REQUESTS_PER_MINUTE=60
MAX_REQUESTS_PER_HOUR=600
REQUEST_TIMEOUT=60

# FFmpeg Security Configuration
FFMPEG_MAX_MEMORY_MB=512  # Maximum memory usage for FFmpeg process
FFMPEG_MAX_CPU_SECONDS=30  # Maximum CPU time for FFmpeg process
FFMPEG_MAX_OUTPUT_SIZE_MB=100  # Maximum output file size
FFMPEG_MAX_DURATION_SECONDS=600  # Maximum audio duration (10 minutes)
FFMPEG_TIMEOUT_SECONDS=10  # Process timeout
FFMPEG_MAX_ANALYZEDURATION=10000000  # 10 seconds in microseconds
FFMPEG_MAX_PROBESIZE=10000000  # 10MB probe size
FFMPEG_MAX_THREADS=1  # Number of threads for FFmpeg

# Circuit Breaker Configuration
FFMPEG_CIRCUIT_BREAKER_THRESHOLD=5  # Failures before circuit opens
FFMPEG_CIRCUIT_BREAKER_RESET_TIME=60  # Reset time in seconds

# Rate Limiting per Client
FFMPEG_MAX_CONCURRENT_PER_CLIENT=2  # Max concurrent FFmpeg processes per client
FFMPEG_MAX_REQUESTS_PER_MINUTE=10  # Max FFmpeg requests per minute per client

# Legacy Mode (disable security sandbox for compatibility)
FFMPEG_LEGACY_MODE=false

# Engine-specific Configuration

## Whisper
WHISPER_MODEL_SIZE=base
WHISPER_DEVICE=cpu

## Vosk
VOSK_MODEL_PATH=/models/vosk-model-en-us-0.22

## Silero
SILERO_LANGUAGE=en

## Wav2Vec2
WAV2VEC2_MODEL=facebook/wav2vec2-base-960h

## DeepSpeech
DEEPSPEECH_MODEL_PATH=/models/deepspeech-0.9.3-models.pbmm
DEEPSPEECH_SCORER_PATH=/models/deepspeech-0.9.3-models.scorer

## Coqui
COQUI_MODEL_PATH=/models/coqui-stt-1.4.0-model.tflite

## NeMo
NEMO_MODEL_NAME=stt_en_conformer_ctc_large

## SpeechBrain
SPEECHBRAIN_SOURCE=speechbrain/asr-transformer-transformerlm-librispeech
SPEECHBRAIN_SAVEDIR=/models/speechbrain